<div>
  <h2>Add Test Center</h2>
  <form #testCenterForm="ngForm" (ngSubmit)="addTestCenter()">
    <div>
      <label for="name">Center Name:</label>
      <input type="text" id="name" name="name" [(ngModel)]="testCenter.name" required>
    </div>
    <div>
      <label for="bio">Bio:</label>
      <input type="text" id="bio" name="bio" [(ngModel)]="testCenter.bio" required>
    </div>
    <div *ngFor="let branch of testCenter.branches; let branchIndex = index">
      <h3>Branch {{ branchIndex + 1 }}</h3>
      <div>
        <label for="branchName">Branch Name:</label>
        <input type="text" id="branchName" [(ngModel)]="branch.name" name="branchName{{branchIndex}}" required>
      </div>
      <div>
        <label for="branchAddress">Branch Address:</label>
        <input type="text" id="branchAddress" [(ngModel)]="branch.address" name="branchAddress{{branchIndex}}" required>
      </div>
      <div>
        <label for="branchLocation">Branch Location:</label>
        <input type="text" id="branchLocation" [(ngModel)]="branch.location" name="branchLocation{{branchIndex}}" required>
      </div>
      <div *ngFor="let date of branch.dates; let dateIndex = index">
        <h4>Date {{ dateIndex + 1 }}</h4>
        <div>
          <label for="date">Date:</label>
          <input type="text" id="date" [(ngModel)]="date.date" name="date{{branchIndex}}{{dateIndex}}" required>
        </div>
        <div>
          <label for="time">Time:</label>
          <input type="text" id="time" [(ngModel)]="date.time" name="time{{branchIndex}}{{dateIndex}}" required>
        </div>
        <div>
          <label for="status">Status:</label>
          <input type="checkbox" id="status" [(ngModel)]="date.status" name="status{{branchIndex}}{{dateIndex}}" required>
        </div>
        <div>
          <label for="capacity">Capacity:</label>
          <input type="number" id="capacity" [(ngModel)]="date.capacity" name="capacity{{branchIndex}}{{dateIndex}}" required>
        </div>
        <button type="button" (click)="removeDate(branchIndex, dateIndex)">Remove Date</button>
      </div>
      <button type="button" (click)="addDate(branchIndex)">Add Date</button>
      <button type="button" (click)="removeBranch(branchIndex)">Remove Branch</button>
    </div>
    <button type="button" (click)="addBranch()">Add Branch</button>
    <button type="submit">Submit</button>
  </form>

  <div>
    <h2>Update Test Center</h2>
    <form #testCenterForm="ngForm" (ngSubmit)="updateTestCenter()">
      <div>
        <label for="name">Center Name:</label>
        <input type="text" id="name" name="name" [(ngModel)]="testCenterUpdate.name" required>
      </div>
      <div>
        <label for="bio">Bio:</label>
        <input type="text" id="bio" name="bio" [(ngModel)]="testCenterUpdate.bio" required>
      </div>
      <div *ngFor="let branch of testCenter.branches; let branchIndex = index">
        <h3>Branch {{ branchIndex + 1 }}</h3>
        <div>
          <label for="branchName">Branch Name:</label>
          <input type="text" id="branchName" [(ngModel)]="testCenterUpdate.branches.name" name="branchName{{branchIndex}}" required>
        </div>
        <div>
          <label for="branchAddress">Branch Address:</label>
          <input type="text" id="branchAddress" [(ngModel)]="testCenterUpdate.branches.address" name="branchAddress{{branchIndex}}" required>
        </div>
        <div>
          <label for="branchLocation">Branch Location:</label>
          <input type="text" id="branchLocation" [(ngModel)]="testCenterUpdate.branches.location" name="branchLocation{{branchIndex}}" required>
        </div>
        <div *ngFor="let date of branch.dates; let dateIndex = index">
          <h4>Date {{ dateIndex + 1 }}</h4>
          <div>
            <label for="date">Date:</label>
            <input type="text" id="date" [(ngModel)]="date.date" name="date{{branchIndex}}{{dateIndex}}" required>
          </div>
          <div>
            <label for="time">Time:</label>
            <input type="text" id="time" [(ngModel)]="date.time" name="time{{branchIndex}}{{dateIndex}}" required>
          </div>
          <div>
            <label for="status">Status:</label>
            <input type="checkbox" id="status" [(ngModel)]="date.status" name="status{{branchIndex}}{{dateIndex}}" required>
          </div>
          <div>
            <label for="capacity">Capacity:</label>
            <input type="number" id="capacity" [(ngModel)]="date.capacity" name="capacity{{branchIndex}}{{dateIndex}}" required>
          </div>
          <button type="button" (click)="removeDate(branchIndex, dateIndex)">Remove Date</button>
        </div>
        <button type="button" (click)="addDate(branchIndex)">Add Date</button>
        <button type="button" (click)="removeBranch(branchIndex)">Remove Branch</button>
      </div>
      <button type="button" (click)="addBranch()">Add Branch</button>
      <button type="submit">Submit</button>
    </form>
  </div>

  <div>
    <h2>Search Test Centers</h2>
    <label for="location">Enter Location:</label>
    <input type="text" id="location" name="location" [(ngModel)]="searchLocation">
    <button (click)="searchTestCenters()">Search</button>
  
    <div *ngIf="searchResults> 0">
      <h3>Matching Test Centers:</h3>
      <ul>
        <li *ngFor="let center of searchResults">
          <h4>{{ center.name }}</h4>
          <p>Location: {{ center.location }}</p>
        </li>
      </ul>
    </div>
    <div *ngIf="searchResults === 0 && searchPerformed">
      <p>No matching test centers found.</p>
    </div>
  </div>

  <div>
    <h2>Create Exam</h2>
    <form #examForm="ngForm" (ngSubmit)="createExam()">
      <div>
        <label for="examName">Exam Name:</label>
        <input type="text" id="examName" name="examName" [(ngModel)]="exam.name" required>
      </div>
      <div>
        <label for="duration">Duration:</label>
        <input type="text" id="duration" name="duration" [(ngModel)]="exam.duration" required>
      </div>
      <div>
        <label for="date">Date:</label>
        <input type="text" id="date" name="date" [(ngModel)]="exam.date" required>
      </div>
      <div>
        <label for="time">Time:</label>
        <input type="text" id="time" name="time" [(ngModel)]="exam.time" required>
      </div>
      <div>
        <label for="grades">Grades:</label>
        <input type="number" id="grades" name="grades" [(ngModel)]="exam.grades" required>
      </div>
      <div>
        <label for="testcenter">Test Center:</label>
        <input type="text" id="testcenter" name="testcenter" [(ngModel)]="exam.testcenter" required>
      </div>
      <div>
        <label for="branchName">Branch Name:</label>
        <input type="text" id="branchName" name="branchName" [(ngModel)]="exam.branchName" required>
      </div>
      <button type="submit">Create Exam</button>
    </form>
  </div>
  
</div>

